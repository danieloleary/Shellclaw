# ğŸ—‘ï¸ SHELL-CONSOLIDATION.qmd

ğŸ”§ QMD TAGS: CLEANUP, ORGANIZATION, SHELL, DEPRECATION, COBRACLAW

---

## ğŸ¦€ Overview

**Shell Script Sprawl Elimination** - Consolidate all standalone `.sh` scripts into QMD files. No more scattered shell files. All functionality documented and embedded in QMD.

**Key Problem:**
- Too many standalone `.sh` files scattered across workspace
- Hard to maintain, document, and version
- Not consistent with QMD-first approach

**Solution:**
- Embed scripts in their corresponding QMD files
- Deprecate standalone `.sh` files
- Keep only essential QMD files

---

## ğŸ’¥ Current State

### Standalone .sh Files (TO BE CONSOLIDATED)

| File | Purpose | QMD Home |
|------|---------|----------|
| `cobra-mode.sh` | Activate Cobra Mode | PREEMPTIVE-STRIKES.qmd |
| `patrol.sh` | Run system patrols | PREEMPTIVE-STRIKES.qmd |
| `quotes.sh` | Quote management | QUOTES.qmd |
| `ralph.sh` | Ralph Loop runner | (keep as tool) |
| `test-skill.sh` | Test runner | (keep as tool) |
| `trophies.sh` | Trophy management | TROPHIES.qmd |
| `enrich-atomic-facts.sh` | Atomic facts extraction | ATOMIC-FACTS-SYSTEM.qmd |
| `test-atomic-facts-xargs.sh` | Test for xargs bug | ATOMIC-FACTS-SYSTEM.qmd |
| `test-model-indicator.sh` | Test for model indicator | how-i-work.qmd |

---

## âœ… Consolidation Status (v1.1 - 2026-02-01 19:45)

| Script | Status | QMD Location |
|--------|--------|--------------|
| enrich-atomic-facts.sh | âœ… EMBEDDED | ATOMIC-FACTS-SYSTEM.qmd |
| test-atomic-facts-xargs.sh | âœ… EMBEDDED | ATOMIC-FACTS-SYSTEM.qmd |
| cobra-mode.sh | âœ… EMBEDDED | PREEMPTIVE-STRIKES.qmd |
| patrol.sh | âœ… EMBEDDED | PREEMPTIVE-STRIKES.qmd |
| quotes.sh | âœ… EMBEDDED | QUOTES.qmd |
| trophies.sh | âœ… EMBEDDED | TROPHIES.qmd |
| test-model-indicator.sh | â³ Pending | how-i-work.qmd |

### Deprecated Scripts
The following have deprecation notices pointing to their QMD home:
- `cobra-mode.sh` â†’ PREEMPTIVE-STRIKES.qmd
- `patrol.sh` â†’ PREEMPTIVE-STRIKES.qmd
- `enrich-atomic-facts.sh` â†’ ATOMIC-FACTS-SYSTEM.qmd
- `test-atomic-facts-xargs.sh` â†’ ATOMIC-FACTS-SYSTEM.qmd
- `test-model-indicator.sh` â†’ how-i-work.qmd

### Scripts to KEEP (Essential Tools)
These remain as standalone scripts because they're CLI tools:
- `ralph.sh` - Ralph Loop runner (project-level tool)
- `test-skill.sh` - Test runner (project-level tool)

---

## ğŸ¥‹ Implementation Notes

### Files to Keep (Essential Tools)

These remain as standalone scripts because they're CLI tools:

- `ralph.sh` - Ralph Loop runner (project-level tool)
- `test-skill.sh` - Test runner (project-level tool)

### Files to Consolidate

Everything else â†’ Embed in QMD files under "Implementation Notes"

### Migration Pattern

**Before (standalone .sh):**
```bash
#!/bin/bash
echo "Hello"
```

**After (embedded in QMD):**
```markdown
### Shell Script (embedded)
```bash
#!/bin/bash
echo "Hello"
```
```

---

## ğŸ¯ Migration Steps

### Step 1: Identify
List all `.sh` files and their purpose.

### Step 2: Match
Find or create the corresponding QMD file.

### Step 3: Embed
Move script content into QMD under "Implementation Notes".

### Step 4: Deprecate
Add deprecation notice to old `.sh` file.

### Step 5: Update
Update test references to use QMD instead of `.sh`.

---

## ğŸ“– Cobra Kai Vibes

> "Too many weapons dilutes the master. One tool, mastered."
> â€” The Creed

**Philosophy:**
```
ğŸ¯ One source of truth (QMD)
ğŸ“– Documentation lives with code
ğŸ§¹ Clean workspace
âœ… Tests embedded
```

---

## ğŸ”„ Evolution Path

| Level | Feature | Status |
|-------|---------|--------|
| 1 | Inventory all .sh files | âœ… Done |
| 2 | Create master QMD | âœ… Done |
| 3 | Consolidate core scripts | âœ… Done |
| 4 | Deprecate old files | âœ… Done |
| 5 | QMD-only workspace | â³ Future |

---

## ğŸ”„ Test Strikes

```bash
# Count standalone .sh files
ls ~/.openclaw/workspace/cobraclaw/*.sh | wc -l
ls ~/.openclaw/workspace/scripts/*.sh | wc -l

# Count QMD files
ls ~/.openclaw/workspace/cobraclaw/*.qmd | wc -l

# Goal: QMD count >> .sh count
```

---

## ğŸ“Š Progress Summary

| Metric | Before | After |
|--------|--------|-------|
| Standalone .sh files | 9 | 6 (2 tools + 4 deprecated) |
| QMD files | 13 | 17 |
| Embedded scripts | 0 | 6 |

---

## ğŸ”„ Complete

**QMD: SHELL-CONSOLIDATION System v1.1**
- ğŸ“‹ Inventory of all .sh files
- ğŸ¯ Migration path to QMD
- ğŸ§¹ 6 scripts embedded, 4 deprecated
- âœ… Tests embedded in QMD

**Commit:** `QMD: SHELL-CONSOLIDATION v1.1 - 6/8 scripts embedded! No more shell sprawl! ğŸ—‘ï¸âœ…`

---

**ğŸ—‘ï¸ "One tool. One purpose. One file." ğŸ—‘ï¸**

# @qmd:tags=cleanup,shell,scripts,consolidation,organization,cobraclaw
# @qmd:version=1.1
