# âŒ¨ï¸ COMMAND-PALETTE.qmd

ğŸ”§ QMD TAGS: SKILL, CLI, TERMINAL, FUZZY-SEARCH, UNIFIED, COBRACLAW

---

## ğŸ¦€ Overview

**Command Palette** - Unified CLI (`teddy`) with fuzzy search for all commands. One place to access every feature: Ralph Loops, memory, heartbeats, files, web, coding, and more. Like Spotlight/Command+K for your AI.

**Key Features:**
- ğŸ¯ Unified `teddy` command
- ğŸ” Fuzzy search for commands
- ğŸ“– Natural language parsing
- ğŸ¨ Beautiful CLI output
- âš¡ Fast execution
- ğŸ§  Learns your preferences

---

## ğŸ’¥ How It Works

### Command Structure

```
teddy [command] [options]

teddy run ralph-loop    # Run a Ralph Loop
teddy remember "X"      # Add to memory
teddy check             # Heartbeat check
teddy search "X"        # Search everything
teddy voice oliver      # Switch to Oliver
teddy patrol            # Run patrols
teddy briefing          # Today's briefing
teddy help              # Show all commands
```

### Fuzzy Search Example

```
$ teddy search "run ralph"
  
  ğŸ” Searching...
  
  âœ“ teddy run ralph [Run Ralph Loop]
  âœ“ teddy run Ralph-Wiggum [Ralph Wiggum Mode]
  âœ“ teddy Ralph-status [Check Ralph status]
  
  Select: [1-3] or type more:
```

### Natural Language

```
$ teddy "run a Ralph Loop for my website"
  
  ğŸ¯ Detected: Run Ralph Loop
  ğŸ“ Intent: Execute multi-story project
  âœ… Starting Ralph Loop...
```

---

## ğŸ¥‹ Implementation Notes

### Files Touched
- `COMMAND-PALETTE.qmd` (this file)
- `teddy.sh` (main CLI)
- `completions/teddy.bash` (bash completion)
- `dojo-functions.js` (command handlers)

### Main CLI (teddy.sh)

```bash
#!/bin/bash
# âŒ¨ï¸ COBRACLAW COMMAND PALETTE
# Unified CLI for all Teddy features

VERSION="1.0.0"
COMMANDS_DIR="./commands"

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Available commands
COMMANDS=(
  "run|Run Ralph Loop|Execute multi-story project"
  "remember|Add to memory|Quick note capture"
  "check|Heartbeat check|System status"
  "search|Search everything|Fuzzy search files/memory/web"
  "voice|Switch voice|Forest Friends mode switching"
  "patrol|Run patrols|Execute system patrols"
  "briefing|Show briefing|Today's morning briefing"
  "retro|Weekly retro|Generate weekly summary"
  "dream|Dream mode|Background automation"
  "capture|Quick capture|Fast note taking"
  "achievements|Show badges|View achievement badges"
  "trophies|Show trophies|View trophy case"
  "help|Show help|All commands"
  "version|Version info|Check teddy version"
)

# Display command palette
show_palette() {
  echo ""
  echo "âŒ¨ï¸  COBRACLAW COMMAND PALETTE"
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo ""
  
  for cmd in "${COMMANDS[@]}"; do
    IFS='|' read -r key desc long <<< "$cmd"
    printf "  ${GREEN}%-15s${NC} %s\n" "$key" "$desc"
  done
  
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo "Usage: teddy [command] [options]"
  echo "       teddy search [query]"
  echo "       teddy help [command]"
  echo ""
}

# Fuzzy search
fuzzy_search() {
  local query="$*"
  if [ -z "$query" ]; then
    show_palette
    return
  fi
  
  echo ""
  echo "ğŸ” Searching: $query"
  echo ""
  
  local results=0
  for cmd in "${COMMANDS[@]}"; do
    IFS='|' read -r key desc long <<< "$cmd"
    if [[ "$key" == *"$query"* ]] || [[ "$desc" == *"$query"* ]]; then
      echo "  ${GREEN}âœ“${NC} $key - $desc"
      ((results++))
    fi
  done
  
  if [ $results -eq 0 ]; then
    echo "  No commands found. Try 'teddy help'"
  fi
  
  echo ""
}

# Main command handler
handle_command() {
  local cmd="$1"
  shift
  
  case "$cmd" in
    run|r)
      echo "ğŸ¯ Running Ralph Loop..."
      bash ralph.sh
      ;;
    remember|rem|m)
      echo "ğŸ“ Capturing to memory..."
      bash capture.sh "$*"
      ;;
    check|c)
      echo "ğŸ«€ Heartbeat check..."
      bash teddy-heartbeat.sh 2>/dev/null || echo "Heartbeat script not found"
      ;;
    search|s)
      fuzzy_search "$@"
      ;;
    voice|v)
      bash voice-toggle.sh "$@"
      ;;
    patrol|p)
      echo "ğŸ•µï¸ Running patrols..."
      bash patrol.sh
      ;;
    briefing|brief)
      echo "ğŸŒ… Showing morning briefing..."
      cat ./briefings/$(date +%Y-%m-%d).md 2>/dev/null || echo "No briefing found. Run morning-briefing.sh first."
      ;;
    retro|weekly)
      echo "ğŸ“Š Running weekly retro..."
      bash retro.sh
      ;;
    dream|dm)
      echo "ğŸ’¤ Activating dream mode..."
      bash dream-mode.sh
      ;;
    capture|cap)
      bash capture.sh "$@"
      ;;
    achievements|badges)
      echo "ğŸ–ï¸ Showing achievements..."
      bash achievements.sh show
      ;;
    trophies|trophy)
      echo "ğŸ† Showing trophy case..."
      bash trophies.sh show
      ;;
    help|h|--help|-h)
      if [ -n "$1" ]; then
        # Show help for specific command
        fuzzy_search "$1"
      else
        show_palette
        echo "Examples:"
        echo "  teddy run ralph"
        echo "  teddy remember 'Great idea'"
        echo "  teddy search 'memory'"
        echo "  teddy voice oliver"
      fi
      ;;
    version|--version|-v)
      echo "âŒ¨ï¸  Teddy CLI v$VERSION"
      echo "   Part of CobraClaw Dojo"
      ;;
    "")
      show_palette
      ;;
    *)
      echo "ğŸ¤” Unknown command: $cmd"
      echo "   Try 'teddy help'"
      ;;
  esac
}

# Main
if [ -n "$1" ]; then
  handle_command "$@"
else
  show_palette
fi
```

### Bash Completion (completions/teddy.bash)

```bash
#!/bin/bash
# Bash completion for teddy CLI

_teddy_completions() {
  local cur prev words cword
  _init_completion || return
  
  local commands="run remember check search voice patrol briefing retro dream capture achievements trophies help version"
  
  if [[ "$cur" == * ]]; then
    COMPREPLY=($(compgen -W "$commands" -- "$cur"))
    return
  fi
}

complete -F _teddy_completions teddy
```

### dojo-functions.js

```javascript
/**
 * Parse natural language command
 */
async function parseCommand(input) {
  const lower = input.toLowerCase();
  
  const commandMap = {
    'run ralph': 'runRalph',
    'remember': 'remember',
    'check': 'heartbeat',
    'search': 'search',
    'voice': 'switchVoice',
    'patrol': 'runPatrol',
    'briefing': 'showBriefing',
    'retro': 'weeklyRetro',
    'dream': 'dreamMode',
    'capture': 'quickCapture',
    'achievements': 'showAchievements',
    'trophies': 'showTrophies',
    'help': 'showHelp'
  };
  
  for (const [key, handler] of Object.entries(commandMap)) {
    if (lower.includes(key)) {
      return { command: key, handler };
    }
  }
  
  return { command: 'unknown', input };
}

/**
 * Execute command via teddy CLI
 */
async function executeTeddyCommand(command) {
  const parsed = await parseCommand(command);
  
  if (parsed.handler) {
    return await runHandler(parsed.handler);
  }
  
  return { status: 'unknown', message: 'Command not recognized' };
}
```

---

## ğŸ¯ Usage Examples

### Basic Commands
```bash
teddy run ralph           # Run Ralph Loop
teddy remember "X"        # Quick memory
teddy check               # Heartbeat
teddy search "memory"     # Fuzzy search
teddy voice oliver        # Switch voice
teddy patrol              # Run patrols
teddy briefing            # Show briefing
```

### Natural Language
```bash
teddy "run a Ralph Loop"      # Detected as run ralph
teddy "remember this idea"     # Detected as remember
teddy "check my system"       # Detected as check
teddy "show me achievements"  # Detected as achievements
```

### Fuzzy Search
```bash
teddy search ralph       # Shows ralph-related commands
teddy search mem         # Shows memory commands
teddy search voice       # Shows voice commands
```

### Help
```bash
teddy help               # Show all commands
teddy help run           # Help for run command
teddy help voice         # Help for voice command
```

---

## ğŸ“– Cobra Kai Vibes

> "One command to rule them all. One CLI to find them."
> â€” The Command Palette

**CLI Philosophy:**
```
âŒ¨ï¸ Speed over complexity
ğŸ” Find before you run
ğŸ“– Natural language supported
ğŸ¨ Beautiful output
âš¡ Instant execution
ğŸ§  Learns your patterns
```

---

## ğŸ”„ Evolution Path

| Level | Feature | Unlock |
|-------|---------|--------|
| 1 | Basic command routing | teddy.sh |
| 2 | Fuzzy search | Search algorithm |
| 3 | Natural language | NLP parsing |
| 4 | Auto-completion | Bash/zsh/fish |
| 5 | Full GUI | Command palette UI |

**Future ExpansIONS:**
- `teddy-gui-qmd.md** - Visual command palette
- `teddy-aliases-qmd.md** - Custom shortcuts
- `teddy-macros-qmd.md** - Command chains

---

## ğŸ”„ Test Strikes

```bash
# 1. Test help
teddy help

# 2. Test search
teddy search ralph

# 3. Test command
teddy version

# 4. Test natural language
teddy "show me the trophies"

# 5. Install completion (optional)
source completions/teddy.bash
```

---

## âŒ¨ï¸ Complete

**QMD: COMMAND-PALETTE Added**
- âŒ¨ï¸ Unified `teddy` CLI
- ğŸ” Fuzzy search for commands
- ğŸ“– Natural language parsing
- ğŸ¨ Beautiful colored output
- âš¡ Fast command routing
- ğŸ§  Extensible command system

**Commit:** `git commit -m "QMD: COMMAND-PALETTE - Unified teddy CLI with fuzzy search, natural language, all commands in one! âŒ¨ï¸"`

---

**âŒ¨ï¸ "One CLI to rule them all. One CLI to find them." ğŸ”**

# @qmd:tags=cli,terminal,command,fuzzy-search,unified,cobraclaw
# @qmd:version=1.0
