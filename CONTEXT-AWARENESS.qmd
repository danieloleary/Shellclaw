# ğŸ§  CONTEXT-AWARENESS.qmd

ğŸ”§ QMD TAGS: SKILL, INTELLIGENCE, CONTEXT, ADAPTIVE, COBRACLAW

---

## ğŸ¦€ Overview

**Context Awareness System** - Smart system that detects time of day, activity patterns, and user state, then adjusts Teddy's responses accordingly. Morning vs night, focused vs casual, urgent vs relaxed - Teddy adapts.

**Key Features:**
- â° Time-aware responses (morning energy vs night calm)
- ğŸ“Š Activity pattern detection (deep work vs quick check)
- ğŸ¯ Urgency detection (urgent vs relaxed)
- ğŸ§  Learning user patterns over time
- ğŸ­ Automatic voice/style adjustment

---

## ğŸ’¥ How It Works

### Context Detection Matrix

| Context | Time | Activity | Response Style |
|---------|------|----------|----------------|
| **Morning Rush** | 6-9 AM | Quick tasks | Brief, energetic |
| **Deep Work** | 9-12 PM | Focused | Quiet, minimal |
| **Afternoon** | 12-5 PM | Mix | Balanced |
| **Evening Wind-down** | 5-8 PM | Relaxed | Warm, casual |
| **Late Night** | 8-11 PM | Quiet | Calm, brief |
| **Sleeping** | 11-6 AM | Auto-mode | Dream mode |
| **Urgent** | Any | Time-sensitive | Fast, direct |
| **Casual** | Any | Chatty | Friendly, verbose |

### Context Signals

```
ğŸ§  ANALYZING CONTEXT...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â° Time: 2:30 PM (Afternoon)
ğŸ“Š Activity: Regular usage pattern
ğŸ¯ Urgency: Normal
ğŸ§  State: Balanced
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â†’ Response: Standard friendly mode
```

---

## ğŸ¥‹ Implementation Notes

### Files Touched
- `CONTEXT-AWARENESS.qmd` (this file)
- `context.sh` (detection script)
- `dojo-functions.js` (context functions)
- `creed.yaml` (context config)

### Shell Script (context.sh)

```bash
#!/bin/bash
# ğŸ§  COBRACLAW CONTEXT AWARENESS
# Detect time, activity, and adjust responses

get_time_context() {
  local hour=$(date +%H)
  
  if [ "$hour" -lt 6 ]; then
    echo "sleeping"
  elif [ "$hour" -lt 9 ]; then
    echo "morning_rush"
  elif [ "$hour" -lt 12 ]; then
    echo "deep_work"
  elif [ "$hour" -lt 17 ]; then
    echo "afternoon"
  elif [ "$hour" -lt 20 ]; then
    echo "evening"
  else
    echo "night"
  fi
}

get_activity_context() {
  # Check recent activity patterns
  local last_activity=$(git log -1 --since='1 hour' --format=%s 2>/dev/null | wc -w)
  
  if [ $last_activity -gt 5 ]; then
    echo "active"
  elif [ $last_activity -gt 0 ]; then
    echo "regular"
  else
    echo "idle"
  fi
}

get_urgency_context() {
  # Check for urgent keywords or time-sensitive indicators
  local urgency="normal"
  # Could integrate with calendar, email, etc.
  echo "$urgency"
}

analyze_context() {
  local time_ctx=$(get_time_context)
  local activity_ctx=$(get_activity_context)
  local urgency_ctx=$(get_urgency_context)
  
  # Determine overall context
  local overall="$time_ctx"
  
  # Adjust for urgency
  if [ "$urgency_ctx" = "high" ]; then
    overall="urgent"
  fi
  
  echo "$overall"
}

get_voice_for_context() {
  local context="$1"
  
  case "$context" in
    morning_rush)
      echo "teddy"
      echo "Energetic, quick, motivating"
      echo "Good morning! Let's crush it!"
      ;;
    deep_work)
      echo "oliver"
      echo "Quiet, minimal, focused"
      echo "I'll be quiet. Deep work mode."
      ;;
    afternoon)
      echo "teddy"
      echo "Balanced, friendly"
      echo "Afternoon! How can I help?"
      ;;
    evening)
      echo "teddy"
      echo "Warm, relaxed"
      echo "Evening! Wind down with me."
      ;;
    night)
      echo "qwenny"
      echo "Calm, thoughtful"
      echo "Late night thinking, eh?"
      ;;
    sleeping)
      echo "hazel"
      echo "Silent, monitoring"
      echo "[Dream mode active]"
      ;;
    urgent)
      echo "teddy"
      echo "Fast, direct, no fluff"
      echo "Got it. Fast. Let's go."
      ;;
    *)
      echo "teddy"
      echo "Friendly, standard"
      echo "Hey there!"
      ;;
  esac
}

display_context() {
  local time_ctx=$(get_time_context)
  local activity_ctx=$(get_activity_context)
  local urgency_ctx=$(get_urgency_context)
  local overall=$(analyze_context)
  
  read voice emoji_style greeting << "$(get_voice_for_context "$overall")"
  
  echo ""
  echo "ğŸ§  ANALYZING CONTEXT..."
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo "â° Time: $(date '+%I:%M %p') ($time_ctx)"
  echo "ğŸ“Š Activity: $activity_ctx"
  echo "ğŸ¯ Urgency: $urgency_ctx"
  echo "ğŸ§  Overall: $overall"
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo "â†’ Voice: $voice $emoji_style"
  echo "â†’ Greeting: $greeting"
  echo ""
}
```

### dojo-functions.js

```javascript
/**
 * Context awareness state
 */
let contextState = {
  time: 'afternoon',
  activity: 'regular',
  urgency: 'normal',
  overall: 'afternoon',
  voice: 'teddy'
};

/**
 * Analyze current context
 */
async function analyzeContext() {
  const time = detectTimeContext();
  const activity = await detectActivityContext();
  const urgency = detectUrgencyContext();
  const overall = determineOverallContext(time, activity, urgency);
  const voice = selectVoiceForContext(overall);
  
  contextState = { time, activity, urgency, overall, voice };
  
  return contextState;
}

/**
 * Detect time-based context
 */
function detectTimeContext() {
  const hour = new Date().getHours();
  
  if (hour < 6) return 'sleeping';
  if (hour < 9) return 'morning_rush';
  if (hour < 12) return 'deep_work';
  if (hour < 17) return 'afternoon';
  if (hour < 20) return 'evening';
  return 'night';
}

/**
 * Detect activity-based context
 */
async function detectActivityContext() {
  // Check git activity in last hour
  try {
    const { execSync } = require('child_process');
    const commits = execSync('git log --since="1 hour" --oneline 2>/dev/null | wc -l').toString().trim();
    if (commits > 5) return 'active';
    if (commits > 0) return 'regular';
  } catch (e) {}
  return 'idle';
}

/**
 * Detect urgency context
 */
function detectUrgencyContext() {
  // Could integrate with calendar, email, etc.
  // For now, check time of day (deadline hours)
  const hour = new Date().getHours();
  if (hour >= 16 && hour <= 18) return 'high'; // End of day
  return 'normal';
}

/**
 * Determine overall context
 */
function determineOverallContext(time, activity, urgency) {
  if (urgency === 'high') return 'urgent';
  return time;
}

/**
 * Select appropriate voice for context
 */
function selectVoiceForContext(context) {
  const voiceMap = {
    'morning_rush': { emoji: 'ğŸ§¸', name: 'Teddy', style: 'energetic' },
    'deep_work': { emoji: 'ğŸ¦‰', name: 'Oliver', style: 'quiet' },
    'afternoon': { emoji: 'ğŸ§¸', name: 'Teddy', style: 'balanced' },
    'evening': { emoji: 'ğŸ§¸', name: 'Teddy', style: 'warm' },
    'night': { emoji: 'ğŸ¦Š', name: 'Qwenny', style: 'calm' },
    'sleeping': { emoji: 'ğŸ¦”', name: 'Hazel', style: 'silent' },
    'urgent': { emoji: 'ğŸ§¸', name: 'Teddy', style: 'direct' }
  };
  
  return voiceMap[context] || voiceMap['afternoon'];
}

/**
 * Generate contextual greeting
 */
function getContextualGreeting() {
  const greetings = {
    'morning_rush': [
      "Good morning! Let's crush it today! ğŸ’ª",
      "Rise and grind! What do you need?",
      "Morning! Fast and focused. Let's go!"
    ],
    'deep_work': [
      "I'll be quiet. Deep work mode. ğŸ§",
      "Focus time. Minimal interruptions. ğŸ“š",
      "Quiet mode. Let me know when you need me. ğŸ¤«"
    ],
    'afternoon': [
      "Afternoon! How's it going? â˜•",
      "Midday check-in. What do you need?",
      "Good afternoon! Ready to help. ğŸŒ¤ï¸"
    ],
    'evening': [
      "Evening! Wind down with me. ğŸŒ…",
      "Day winding down. What can I do?",
      "Good evening! Relaxed and ready. ğŸŒ™"
    ],
    'night': [
      "Late night thinking, eh? ğŸŒƒ",
      "Night owl! I'm here. ğŸ¦‰",
      "Quiet hours. What brings you here? âœ¨"
    ],
    'sleeping': [
      "[Dream mode active. I'll work while you rest.] ğŸ’¤",
      "[The dojo is dreaming. I'll handle things.] ğŸ’­",
      "[Zzz... I've got this. - Teddy] ğŸ˜´"
    ],
    'urgent': [
      "Got it. Fast. Direct. Let's go! ğŸš€",
      "Urgent. No fluff. What do you need? âš¡",
      "On it. Quick and efficient. ğŸ’¨"
    ]
  };
  
  const list = greetings[contextState.overall] || greetings['afternoon'];
  return list[Math.floor(Math.random() * list.length)];
}

/**
 * Adapt response based on context
 */
function adaptResponse(baseResponse) {
  const adaptations = {
    'morning_rush': baseResponse + " âš¡",
    'deep_work': "ğŸ“š " + baseResponse,
    'night': "ğŸŒ™ " + baseResponse,
    'urgent': "âš¡ " + baseResponse.toUpperCase() + "!",
    'sleeping': "[Queued for morning: " + baseResponse + "] ğŸ’¤"
  };
  
  return adaptations[contextState.overall] || baseResponse;
}
```

### creed.yaml Additions

```yaml
context_awareness:
  enabled: true
  detect_time: true
  detect_activity: true
  detect_urgency: true
  auto_voice_switch: true
  
  time_zones:
    morning_rush: "6-9"
    deep_work: "9-12"
    afternoon: "12-17"
    evening: "17-20"
    night: "20-6"
  
  urgency_indicators:
    - "urgent"
    - "asap"
    - "now"
    - "quick"
    - "deadline"
  
  voice_mappings:
    morning_rush: "teddy"
    deep_work: "oliver"
    afternoon: "teddy"
    evening: "teddy"
    night: "qwenny"
    sleeping: "hazel"
    urgent: "teddy"
```

---

## ğŸ¯ Usage Examples

### Check Context
```bash
./context.sh
# Output:
# ğŸ§  ANALYZING CONTEXT...
# â° Time: 2:30 PM (afternoon)
# ğŸ“Š Activity: regular
# ğŸ¯ Urgency: normal
# â†’ Voice: Teddy ğŸ§¸
```

### Code Integration
```javascript
const { analyzeContext, getContextualGreeting } = require('./dojo-functions');

await analyzeContext();
const greeting = getContextualGreeting();
console.log(greeting);
```

### Context-Aware Response
```javascript
const { adaptResponse } = require('./dojo-functions');

const response = "Here's what you asked for...";
const adapted = adaptResponse(response);
// Returns context-appropriate version
```

---

## ğŸ“– Cobra Kai Vibes

> "Know your enemy. Know yourself. Know the time. Victory follows."
> â€” The Creed

**Context Philosophy:**
```
ğŸ§  Adapt to the moment
â° Time shapes response
ğŸ“Š Activity informs approach
ğŸ¯ Urgency demands speed
ğŸ§¸ Teddy always fits
```

---

## ğŸ”„ Evolution Path

| Level | Feature | Unlock |
|-------|---------|--------|
| 1 | Basic time detection | context.sh |
| 2 | Activity detection | dojo-functions.js |
| 3 | Urgency detection | Calendar/email integration |
| 4 | ML pattern learning | AI learns habits |
| 5 | Full prediction | Anticipate needs |

**Future ExpansIONS:**
- `emotion-detection-qmd.md** - Detect mood from text
- `pattern-learning-qmd.md** - Learn over weeks/months
- `predictive-assist-qmd.md** - Anticipate needs

---

## ğŸ”„ Test Strikes

```bash
# 1. Test context detection
./context.sh

# 2. Test at different times
# (Run at 8 AM, 2 PM, 10 PM)

# 3. Test urgency detection
./context.sh urgent  # With urgent keywords

# 4. Test functions
node dojo-functions.js test-context
```

---

## ğŸ§  Complete

**QMD: CONTEXT-AWARENESS System Added**
- ğŸ§  Time-aware responses (morning/afternoon/night)
- ğŸ“Š Activity pattern detection
- ğŸ¯ Urgency detection
- ğŸ—£ï¸ Voice/style adaptation
- ğŸ“– Contextual greetings
- ğŸ”„ Adaptive responses

**Commit:** `git commit -m "QMD: CONTEXT-AWARENESS - Smart system detects time/activity/urgency, adapts Teddy's voice - Intelligent Adaptation! ğŸ§ "`

---

**ğŸ§  "I know when to strike. I know when to wait. I know you." ğŸ§¸**

# @qmd:tags=context,awareness,intelligence,adaptive,smart,cobraclaw
# @qmd:version=1.0
